<!DOCTYPE html>
<html lang="zh-Hans">
<head>
  <meta charset="utf-8">
  
  <title>Objective-C代码规范 | EndaKun&#39;s Den</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="代码规范（分享下我们公司的Objective-C代码规范）
开发环境当前Xcode version：8.3.3

请及时升级各小版本，以享受更多的新特性。
大版本升级前，如从Xcode8升级到Xcode9，需要全团队统一意见后再进行升级。

文件组织
工程里的group和文件的物理位置一一对应。不包含内容的的group，应该删除。工程中未使用的无用文件，也应及时删除。
子group放在父group">
<meta property="og:type" content="article">
<meta property="og:title" content="Objective-C代码规范">
<meta property="og:url" content="https://huangchenkun.github.io/2017/07/14/Objective-C代码规范/index.html">
<meta property="og:site_name" content="EndaKun's Den">
<meta property="og:description" content="代码规范（分享下我们公司的Objective-C代码规范）
开发环境当前Xcode version：8.3.3

请及时升级各小版本，以享受更多的新特性。
大版本升级前，如从Xcode8升级到Xcode9，需要全团队统一意见后再进行升级。

文件组织
工程里的group和文件的物理位置一一对应。不包含内容的的group，应该删除。工程中未使用的无用文件，也应及时删除。
子group放在父group">
<meta property="og:updated_time" content="2017-07-14T10:18:40.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Objective-C代码规范">
<meta name="twitter:description" content="代码规范（分享下我们公司的Objective-C代码规范）
开发环境当前Xcode version：8.3.3

请及时升级各小版本，以享受更多的新特性。
大版本升级前，如从Xcode8升级到Xcode9，需要全团队统一意见后再进行升级。

文件组织
工程里的group和文件的物理位置一一对应。不包含内容的的group，应该删除。工程中未使用的无用文件，也应及时删除。
子group放在父group">
  
    <link rel="alternate" href="/atom.xml" title="EndaKun&#39;s Den" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.ico">
  
  <link rel="stylesheet" href="/css/typing.css">
</head>

  
    <body>
  
      <div id="container" class="container">
        <article id="post-Objective-C代码规范" class="article article-type-post" itemscope itemprop="blogPost">
  <header id="header" class="header">
  <nav id="main-nav" class="main-nav">
    
      <a class="main-nav-link" href="/">Home</a>
    
      <a class="main-nav-link" href="/archives">Archives</a>
    
      <a class="main-nav-link" href="/about">About</a>
    
  </nav>
  <nav id="sub-nav">
    
      <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS"></a>
    
  </nav>
</header>

  <hr/>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      Objective-C代码规范
    </h1>
  

      </header>
    
    <div class="article-entry typo" itemprop="articleBody">
      
        <h1 id="代码规范"><a href="#代码规范" class="headerlink" title="代码规范"></a>代码规范</h1><p>（分享下我们公司的Objective-C代码规范）</p>
<h2 id="开发环境"><a href="#开发环境" class="headerlink" title="开发环境"></a>开发环境</h2><p>当前Xcode version：8.3.3</p>
<ul>
<li>请及时升级各小版本，以享受更多的新特性。</li>
<li>大版本升级前，如从Xcode8升级到Xcode9，需要全团队统一意见后再进行升级。</li>
</ul>
<h2 id="文件组织"><a href="#文件组织" class="headerlink" title="文件组织"></a>文件组织</h2><ul>
<li>工程里的group和文件的物理位置一一对应。不包含内容的的group，应该删除。工程中未使用的无用文件，也应及时删除。</li>
<li>子group放在父group内的最上方。</li>
<li>各group和文件，若无业务上的顺序，尽量按照字母顺序排序。</li>
</ul>
<h2 id="代码组织"><a href="#代码组织" class="headerlink" title="代码组织"></a>代码组织</h2><p><code>.m</code>文件内各部分的顺序如下：</p>
<ol>
<li>文件注释</li>
<li><code>#import</code></li>
<li>宏定义</li>
<li>typedef</li>
<li>常量</li>
<li>静态函数</li>
<li>匿名类别</li>
<li><code>@implement</code></li>
</ol>
<p>以上各部分内的内容，除了按照业务逻辑排序，尽量按照字母顺序排序。比如<code>#import</code>内的所有头文件按照文件名排序，类似可以作排序的还有宏定义、delegate名称等。</p>
<p><code>@implement</code>中的函数使用<code>#pragma mark -</code>进行分块，他们的分块及顺序请多注意。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div></pre></td><td class="code"><pre><div class="line">//</div><div class="line">//  AASomeViewController.h</div><div class="line">//  AADriver</div><div class="line">//</div><div class="line">//  Created by fuYanan on 16/9/12.</div><div class="line">//  Copyright © 2016年 AADriver. All rights reserved.</div><div class="line">//</div><div class="line"></div><div class="line">#import &quot;AASomeViewController.h&quot;</div><div class="line">#import &quot;AAGetTouchButton.h&quot;</div><div class="line">#import &quot;AAMapView.h&quot;</div><div class="line">#import &quot;LocationManager.h&quot;</div><div class="line">#import &quot;NSDate+Helper.h&quot;</div><div class="line">#import &quot;ReceivedOrderDetailViewController.h&quot;</div><div class="line"></div><div class="line">#define BUFFER_SIZE (10 * 1024 * 1024)</div><div class="line">#define MY_HEIGHT 400</div><div class="line"></div><div class="line">typedef NS_ENUM(NSInteger, AAMapSearchErrorType)</div><div class="line">&#123;</div><div class="line">    AASearchErrorTypeOnRoute = 1,   // 路径规划报错</div><div class="line">    AASearchErrorTypeOnPoiKeywords, // poi报错</div><div class="line">    AASearchErrorTypeOnReGeocode,   // 逆地理编码报错</div><div class="line">    AASearchErrorTypeOnWeather,     // 天气搜索报错</div><div class="line">    AASearchErrorTypeOnPOIAround,   // 附近搜索报错</div><div class="line">&#125;;</div><div class="line"></div><div class="line">typedef NS_ENUM(NSInteger, AAMapWeatherType)</div><div class="line">&#123;</div><div class="line">    AAMapWeatherTypeLive = 1,   // 实时</div><div class="line">    AAMapWeatherTypeForecast    // 预报</div><div class="line">&#125;;</div><div class="line"></div><div class="line">static const NSUInteger kAlertTagExitApp = 10;</div><div class="line">static const NSUInteger kAlertTagUpdataCheckForce = 11;</div><div class="line">static const NSUInteger kAlertTagUpdataCheckOptional = 12;</div><div class="line">static const NSUInteger kAlertTagUpdataCheckForceInLogin = 13;</div><div class="line">static const NSUInteger kAlertTagGoSettings = 14;</div><div class="line"></div><div class="line">static CGFloat _NSStringPathScale(NSString *string) &#123;</div><div class="line">    return 0.0f;</div><div class="line">&#125;</div><div class="line"></div><div class="line">@interface AASomeViewController () &lt;UITableViewDataSource, UITableViewDelegate, UITextFieldDelegate&gt;</div><div class="line"></div><div class="line">@property(nonatomic,strong)UITextField *usernameField;</div><div class="line">@property(nonatomic,strong)UITextField *passwordField;</div><div class="line">@property(nonatomic,strong)UITextField *verificationField;</div><div class="line"></div><div class="line">@end</div><div class="line"></div><div class="line">@implement</div><div class="line"></div><div class="line">#pragma mark - Lifecycle</div><div class="line"></div><div class="line">- (instancetype)init &#123;</div><div class="line"></div><div class="line">- (void)dealloc &#123;</div><div class="line"></div><div class="line">- (void)viewDidLoad &#123;</div><div class="line"></div><div class="line">- (void)viewWillAppear:(BOOL)animated &#123;</div><div class="line"></div><div class="line">- (void)viewDidAppear:(BOOL)animated &#123;</div><div class="line"></div><div class="line">- (void)viewWillDisappear:(BOOL)animated &#123;</div><div class="line"></div><div class="line">- (void)viewDidDisappear:(BOOL)animated &#123;</div><div class="line"></div><div class="line">- (void)didReceiveMemoryWarning &#123;</div><div class="line"></div><div class="line">#pragma mark - Override</div><div class="line"></div><div class="line">-(void)leftBackButtonClick &#123;</div><div class="line"></div><div class="line">#pragma mark - Custom Accessors</div><div class="line"></div><div class="line">- (void)setCustomProperty:(id)value &#123;</div><div class="line"></div><div class="line">- (id)customProperty &#123;</div><div class="line"></div><div class="line">#pragma mark - Actions</div><div class="line"></div><div class="line">- (void)submitButtonClick:(UIButton *)sender &#123;</div><div class="line"></div><div class="line">#pragma mark - Public</div><div class="line"></div><div class="line">- (void)publicMethod &#123;</div><div class="line"></div><div class="line">#pragma mark - Private</div><div class="line"></div><div class="line">- (void)privateMethod &#123;</div><div class="line"></div><div class="line">#pragma mark - UITableViewDataSource</div><div class="line"></div><div class="line">#pragma mark - UITableViewDelegate</div><div class="line"></div><div class="line">#pragma mark - UITextFieldDelegate</div><div class="line"></div><div class="line">#pragma mark - NSCopying</div><div class="line"></div><div class="line">- (id)copyWithZone:(NSZone *)zone &#123;</div><div class="line"></div><div class="line">#pragma mark - NSObject</div><div class="line"></div><div class="line">- (NSString *)description &#123;</div><div class="line"></div><div class="line">@end</div></pre></td></tr></table></figure>
<h2 id="空格"><a href="#空格" class="headerlink" title="空格"></a>空格</h2><h3 id="缩进"><a href="#缩进" class="headerlink" title="缩进"></a>缩进</h3><p>缩进使用4个空格，不要使用“Tab”。Xcode默认就是这样的。可在“Xcode -&gt; Preferences -&gt; Text Editing -&gt; Indentation”确保如此。</p>
<h3 id="运算符"><a href="#运算符" class="headerlink" title="运算符"></a>运算符</h3><p>二元运算符两侧都需要空格，一元运算符不需要。如：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">void *ptr = &amp;value + 10 * 3;</div><div class="line">time += link.duration;</div><div class="line">curLoop++;</div></pre></td></tr></table></figure>
<h3 id="指针符号"><a href="#指针符号" class="headerlink" title="指针符号"></a>指针符号</h3><p>指针符号与前面的类型之间有空格，与其后的名称之间没有空格。如：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">UIView *view = [[UIView alloc] init];</div><div class="line">UIButton *button = [[UIButton alloc] initWithFrame:rect];</div></pre></td></tr></table></figure>
<p>属性声明时，<code>*</code>前面的空格的数量不做规定，默认只有一个，但是也可根据上下文做对齐。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">@property (nonatomic, strong) AAMapSearchManager *searchManager;</div></pre></td></tr></table></figure>
<h3 id="其它"><a href="#其它" class="headerlink" title="其它"></a>其它</h3><ul>
<li>基本上，符号<code>(</code>、<code>&lt;</code>、<code>{</code>前面都有一个空格。</li>
<li>符号<code>)</code>、<code>&gt;</code>、<code>,</code>、<code>;</code>、<code>]</code>后面有一个空格，除非到了行尾。</li>
<li>符号<code>:</code>、<code>-</code>前后都有空格。</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line">@protocol AAMapNaviViewDelegate &lt;NSObject&gt;</div><div class="line"></div><div class="line">@interface BaseViewController () &lt;UIGestureRecognizerDelegate, NIMConversationManagerDelegate&gt; &#123;</div><div class="line"></div><div class="line">@interface YYAnimatedImageView : UIImageView</div><div class="line"></div><div class="line">    if ((_curLoop &gt;= _totalLoop) &amp;&amp; (_totalLoop != 0)) &#123;</div><div class="line">    </div><div class="line">    for (int i = 0; i &lt; 100; i++) &#123;</div><div class="line">    </div><div class="line">    int i = isHidden ? 0 : 1;</div><div class="line">    </div><div class="line">    UIView *view = [[UIView alloc] init];</div><div class="line">    </div><div class="line">#pragma mark - UITableviewDelegate</div><div class="line"></div><div class="line">- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath &#123;</div></pre></td></tr></table></figure>
<ul>
<li>其它一些例子：</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">@property (attributes) id&lt;Protocol&gt; object;</div><div class="line"></div><div class="line">    CGRectGetMaxY(workTimeButton.frame);</div><div class="line">    NSArray *theStuff = @[@1, @2, @3];</div><div class="line">    NSDictionary *keyedStuff = @&#123;GHDidCreateStyleGuide : @YES&#125;;</div></pre></td></tr></table></figure>
<h2 id="空行与换行"><a href="#空行与换行" class="headerlink" title="空行与换行"></a>空行与换行</h2><h3 id="空行"><a href="#空行" class="headerlink" title="空行"></a>空行</h3><ul>
<li>原则上，最大连续空行数为1，某些地方如<code>@interface</code>、<code>@implement</code>的前面可以有两个连续空行，但不要超过两个连续空行。</li>
<li>函数之间有且只有一个空行。在<code>@interface</code>或<code>@protocol</code>中，同组函数之间可以没有空行。</li>
<li>函数和<code>@interface</code>、<code>@implement</code>、<code>@end</code>、<code>#pragma mark -</code>等行之间也有一个空行。</li>
<li>开始一段新的业务代码时，应该使用换行来进行视觉分割以增加代码的可读性。当然，若无必要，也请勿保留多余空行。</li>
<li>文件末尾有一个空行。</li>
</ul>
<h3 id="换行"><a href="#换行" class="headerlink" title="换行"></a>换行</h3><ul>
<li><p>我们不强制限制每行最多多少字符，但是建议将Xcode的行宽提示设为120个字符，这在13寸的mac上也能显示完全。在编码过程中，尽量保持每行代码不要过长。</p>
</li>
<li><p>如果if的判断条件由多个逻辑运算组成，每个逻辑运算都占一行，逻辑运算符在行首。</p>
</li>
</ul>
<p>应该<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">if ([AAProjectShare share].hasInternet</div><div class="line">    &amp;&amp; [AAProjectShare share].driver_token.length &gt; 0</div><div class="line">    &amp;&amp; [AAProjectShare share].duty == 1) &#123;</div><div class="line">    // ...</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>不应该<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">if ([AAProjectShare share].hasInternet&amp;&amp;[AAProjectShare share].driver_token.length&gt;0&amp;&amp;[AAProjectShare share].duty == 1) &#123;</div></pre></td></tr></table></figure></p>
<ul>
<li>其它换行例子</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">NSArray *theStuff = @[</div><div class="line">    @&quot;Got some long string objects in here.&quot;,</div><div class="line">    [AndSomeModelObjects too],</div><div class="line">    @&quot;Moar strings.&quot;</div><div class="line">];</div><div class="line"></div><div class="line">NSString *string = @&quot;这段字符太长了，以至于不得不分行显示。这段字符太长了，以至于不得不分行显示。这段字&quot;</div><div class="line">                    &quot;符太长了，以至于不得不分行显示。这段字符太长了，以至于不得不分行显示。这段字符太长&quot;</div><div class="line">                    &quot;了，以至于不得不分行显示。这段字符太长了，以至于不得不分行显示。&quot;;</div></pre></td></tr></table></figure>
<h2 id="括号"><a href="#括号" class="headerlink" title="括号"></a>括号</h2><p>括号可以更好地对代码进行分块，你应该多多使用它。</p>
<ul>
<li>函数定义、控制语句的<code>{</code>放在行尾，不独占一行。末尾的<code>}</code>新开一行，并与对应的语句开头对齐。</li>
<li>连续多个运算，可能产生优先级歧义时，应该用圆括号隔开多个运算。如：</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">CGFloat verImageViewOneTop = CGRectGetMaxY(workTimeButton.frame) + (iPhone4 ? 8 : AutoScaleHeight(30));</div></pre></td></tr></table></figure>
<ul>
<li><code>if</code>语句中，即使后面只有一句，也应该使用大括号。<code>for</code>、<code>while</code>等语句同样如此。</li>
</ul>
<p>应该<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">if (!error) &#123;</div><div class="line">    return success;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>不应该<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">if (!error)</div><div class="line">    return success; </div><div class="line"></div><div class="line">if (!error) return success;</div></pre></td></tr></table></figure></p>
<ul>
<li><code>case</code>语句中，如果有多行，也应该使用大括号。如：</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">switch (condition) &#123;</div><div class="line">    case 1:</div><div class="line">        // ...</div><div class="line">        break;</div><div class="line">    case 2: &#123;</div><div class="line">        // ...</div><div class="line">        // 多行用大括号</div><div class="line">        break;</div><div class="line">    &#125;</div><div class="line">    case 3:</div><div class="line">        // ...</div><div class="line">        break;</div><div class="line">    default:</div><div class="line">        // ...</div><div class="line">        break;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="命名"><a href="#命名" class="headerlink" title="命名"></a>命名</h2><ul>
<li>使用美国英语，注意拼写正确。不要使用汉字，不要使用拼音。</li>
<li>使用长的、描述性的命名：</li>
</ul>
<p>应该：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">UIButton *settingsButton;</div></pre></td></tr></table></figure></p>
<p>不应该：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">UIButton *setBut;</div></pre></td></tr></table></figure></p>
<ul>
<li>类名用大写开头的驼峰命名法，最好带上AA前缀。</li>
<li>类别名也用大写开头的驼峰命名法。单独占一个文件的类别，文件名以<code>类名+类别名.h</code>、<code>类名+类别名.m</code>命名。</li>
<li>系统类的类别里的函数，为防冲突，可以带上<code>aa_</code>前缀。</li>
<li>NS_ENUM、NS_OPTIONS也用大写开头的驼峰命名法，其中的每一项都以名称开头。</li>
</ul>
<p>应该<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">typedef NS_ENUM(NSInteger, AAMapWeatherType)</div><div class="line">&#123;</div><div class="line">    AAMapWeatherTypeLive = 1,    // 实时</div><div class="line">    AAMapWeatherTypeForecast     // 预报</div><div class="line">&#125;;</div><div class="line"></div><div class="line">typedef NS_OPTIONS(NSUInteger, UIViewAnimationOptions) &#123;</div><div class="line">    UIViewAnimationOptionLayoutSubviews            = 1 &lt;&lt;  0,</div><div class="line">    UIViewAnimationOptionAllowUserInteraction      = 1 &lt;&lt;  1,</div><div class="line">    ……</div><div class="line">&#125;;</div></pre></td></tr></table></figure></p>
<p>不应该<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">typedef enum &#123;</div><div class="line">    noneMethod,//定位失败、获取城市列表也失败</div><div class="line">    locationMethod,//通过定位拿到的服务列表</div><div class="line">    cityListMethod,//定位失败情况下，通过城市列表拿到的服务</div><div class="line">&#125;getServiceMethod;//用于限制选择地点页是否定位以及地图上是否显示定位按钮</div></pre></td></tr></table></figure></p>
<ul>
<li>私有的静态常量名可以以<code>k</code>开头。如：</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">static const NSUInteger kAlertTagExitApp = 10;</div></pre></td></tr></table></figure>
<ul>
<li>宏定义的名称一定要以大写字母开头，推荐使用全大写字母，单词间使用<code>_</code>连接。多单词的情况下，每单词首字母大写也可接受。</li>
</ul>
<p>应该：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">#define ICON_HEIGHT 40</div><div class="line">#define PushNewOrderData_Notification @&quot;PushNewOrderData_Notification&quot;</div></pre></td></tr></table></figure></p>
<p>不应该：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">#define baseHeight 115</div></pre></td></tr></table></figure></p>
<ul>
<li>属性的命名也使用驼峰式，首单词的首字母小写。如：</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">@property (strong, nonatomic) NSString *descriptiveVariableName;</div></pre></td></tr></table></figure>
<ul>
<li>变量尽量以描述性的方式来命名。单个字符的变量命名应该尽量避免，除了在for()循环中。</li>
</ul>
<p>更多命名规则可参考<a href="https://developer.apple.com/library/content/documentation/Cocoa/Conceptual/CodingGuidelines/CodingGuidelines.html#//apple_ref/doc/uid/10000146-SW1" target="_blank" rel="external">苹果官方文档</a></p>
<h2 id="属性与成员变量"><a href="#属性与成员变量" class="headerlink" title="属性与成员变量"></a>属性与成员变量</h2><ul>
<li>成员变量的命名以下划线<code>_</code>开头。</li>
<li>推荐使用属性，而不推荐使用成员变量。</li>
<li>应该使用<code>.</code>语法来访问属性，访问其他实例时首选括号。如：</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">view.backgroundColor = [UIColor orangeColor];</div><div class="line">[UIApplication sharedApplication].delegate;</div></pre></td></tr></table></figure>
<ul>
<li>不要使用属性自动生成的以下划线开头的成员变量。除非在某些特殊函数中，如<code>init</code>、<code>dealloc</code>、<code>setter</code>、<code>getter</code>等。</li>
<li>不需要暴露出来的的属性不要在头文件中声明，而应该在实现文件中的匿名类别中声明。</li>
</ul>
<h3 id="属性特性"><a href="#属性特性" class="headerlink" title="属性特性"></a>属性特性</h3><ul>
<li>如果属性只在<code>init</code>中设置值，应将它声明为<code>readonly</code>。</li>
<li>NSString属性应声明为<code>copy</code>。</li>
</ul>
<h2 id="函数"><a href="#函数" class="headerlink" title="函数"></a>函数</h2><ul>
<li>函数声明的<code>+</code>或者<code>-</code>之后有一个空格。<code>(</code>前、<code>)</code>后、<code>:</code>前后无空格。</li>
<li>在参数之前应该包含一个具有描述性的关键字来描述参数。注意遵循苹果的风格。</li>
<li><code>init</code>方法的返回类型应该使用<code>instancetype</code>而不是<code>id</code>。</li>
</ul>
<p>应该<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">+ (void)setExampleText:(NSString *)text image:(UIImage *)image;</div><div class="line">- (id)viewWithTag:(NSInteger)tag; </div><div class="line">- (instancetype)initWithWidth:(CGFloat)width height:(CGFloat)height;</div></pre></td></tr></table></figure></p>
<p>不应该<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">+(void)setExampleText:(NSString *)text :(UIImage *)image;</div><div class="line">-(void)setT:(NSString *)text i:(UIImage *)image; </div><div class="line">- (id)taggedView:(NSInteger)tag; </div><div class="line">- (id)initWithWidth:(CGFloat)width andHeight:(CGFloat)height;  </div><div class="line">- (id)initWith:(int)width and:(int)height;</div><div class="line">- (id)initWithWidth:(CGFloat)width height:(CGFloat)height;</div></pre></td></tr></table></figure></p>
<ul>
<li>动作触发函数以动作为结尾。如<code>UIButton</code>点击函数以<code>ButtonClick:</code>结尾，<code>UISwitch</code>动作函数以<code>SwitchAction:</code>结尾。</li>
</ul>
<p>应该<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">[rechargeButton addTarget:self action:@selector(rechargeButtonClick:) forControlEvents:UIControlEventTouchUpInside];</div><div class="line">[settingSwitch addTarget:self action:@selector(settingSwitchAction:) forControlEvents:UIControlEventValueChanged];</div></pre></td></tr></table></figure></p>
<p>不应该<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">[rechargeButton addTarget:self action:@selector(recharge) forControlEvents:UIControlEventTouchUpInside];</div></pre></td></tr></table></figure></p>
<ul>
<li>尽量给每个触发函数起一个名字，不要多个控件公用一个函数。减少magic number的tag使用，如真的需要使用，则给tag声明个常量，取一个直观的名字。如：</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">static const NSUInteger kAlertTagExitApp = 10;</div><div class="line"></div><div class="line">    AAAlertView * alert = [[AAAlertView alloc] initWithTitle:@&quot;网络连接失败，请检查网络&quot;</div><div class="line">                                                     message:nil</div><div class="line">                                                    delegate:self</div><div class="line">                                           cancelButtonTitle:@&quot;确定&quot;</div><div class="line">                                           otherButtonTitles:nil];</div><div class="line">    alert.tag = kAlertTagExitApp;</div><div class="line">    [alert show];</div><div class="line"></div><div class="line">- (void)alertView:(AAAlertView *)alertView clickedButtonAtIndex:(int)buttonIndex &#123;</div><div class="line">    if (alertView.tag == kAlertTagExitApp) &#123;</div><div class="line">        exit(0);</div><div class="line">    &#125;</div></pre></td></tr></table></figure>
<ul>
<li>函数参数过长时，每个参数占一行，并以<code>:</code>对齐。如果第一行参数比较短，则下面的最长行缩进4个空格，其余行以<code>:</code>对齐。如：</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line">- (void)doSomethingWith:(MyObj *)obj</div><div class="line">                   rect:(NSRect)rect</div><div class="line">               interval:(float)interval &#123;</div><div class="line">  ...</div><div class="line">&#125;</div><div class="line"></div><div class="line">- (void)short:(MyObj *)obj</div><div class="line">          longKeyword:(NSRect)rect</div><div class="line">    evenLongerKeyword:(float)interval</div><div class="line">                error:(NSError **)error &#123;</div><div class="line">  ...</div><div class="line">&#125;</div><div class="line"></div><div class="line">[myObj short:arg1</div><div class="line">          longKeyword:arg2</div><div class="line">    evenLongerKeyword:arg3</div><div class="line">                error:arg4];</div></pre></td></tr></table></figure>
<h2 id="注释"><a href="#注释" class="headerlink" title="注释"></a>注释</h2><ul>
<li>注释的快捷键：<code>command + option + /</code>。</li>
<li>尽量保证代码能自解释，让人能直接读懂。但在需要的时候一定要加上精到的注释。</li>
<li>写代码时也要注意及时更新注释，已过期的注释要及时删除。</li>
<li>产品版本更迭产生的无用代码，如无特别理由，不要以注释形式留下来。</li>
<li>文件生成模板所带的注释代码要及时删除。如ViewController中的<code>prepareForSegue:sender</code>方法，View中的<code>drawRect:</code>方法，<code>viewDidLoad:</code>函数中的<code>// Do any additional setup after loading the view.</code>等说明文字。</li>
<li>.h文件中暴露出来的接口，应该添加关于函数、参数、返回值以及副作用的注释。</li>
</ul>
<p>常用注释字段如下</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line">/**</div><div class="line"> 描述信息。说明它是用来干什么的。</div><div class="line"> @discussion 如果有必要，这里可以添加一些其他信息，如为何这么设计、它的应用范围等。</div><div class="line"> </div><div class="line"> @param  title 提示消息标题</div><div class="line"> @param  message 提示消息的内容</div><div class="line"> @param  signs signRangeList的具体含义，及如何使用。</div><div class="line"> @return 返回值的含义</div><div class="line"> </div><div class="line"> @exception NSException可能抛出的异常.</div><div class="line"> </div><div class="line"> @see someMethod</div><div class="line"></div><div class="line"> @warning 可能的副作用、不应该如何使用等。</div><div class="line"> @bug 已发现的bug及应对策略</div><div class="line"> */</div><div class="line">- (instancetype)initWithTitle:(NSString *)title message:(NSString *)message signRangeList:(NSArray *)signs &#123;</div></pre></td></tr></table></figure>
<ul>
<li>善用以下特殊注释：</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">// TODO:</div><div class="line">// FIXME:</div><div class="line">// MARK:</div><div class="line">// !!!:</div><div class="line">// ???:</div></pre></td></tr></table></figure>
<h2 id="常量"><a href="#常量" class="headerlink" title="常量"></a>常量</h2><ul>
<li>尽量使用static声明常量，而不用<code>#define</code></li>
</ul>
<p>应该<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">static NSString * const AAAboutViewControllerURL = @&quot;aachuxing.com&quot;;</div><div class="line">static CGFloat const AAImageThumbnailHeight = 50.0;</div></pre></td></tr></table></figure></p>
<p>不应该<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">#define CompanyName @&quot;aachuxing.com&quot;  </div><div class="line">#define thumbnailHeight 2</div></pre></td></tr></table></figure></p>
<p>在<code>.h</code>头文件中声明供其它代码使用的常量时，使用<code>extern</code>关键字。也可酌情使用<code>FOUNDATION_EXTERN</code>或<code>UIKIT_EXTERN</code>等。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">extern NSString * const AMapSearchErrorDomain;</div><div class="line">FOUNDATION_EXTERN NSString * const AMapFoundationVersion;</div><div class="line">UIKIT_EXTERN const CGFloat MJRefreshLabelLeftInset;</div><div class="line">UIKIT_EXTERN NSString * const MJRefreshKeyPathContentOffset;</div></pre></td></tr></table></figure></p>
<p>具体声明在<code>.m</code>文件中<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">const CGFloat MJRefreshLabelLeftInset = 25;</div><div class="line">NSString *const MJRefreshKeyPathContentOffset = @&quot;contentOffset&quot;;</div></pre></td></tr></table></figure></p>
<h2 id="头文件"><a href="#头文件" class="headerlink" title="头文件"></a>头文件</h2><p>保持头文件的精简。在头文件中只引入必须引入的文件，只暴露出给其它代码使用的代码，其余的放到<code>.m</code>文件中。</p>
<h2 id="Protocol"><a href="#Protocol" class="headerlink" title="Protocol"></a>Protocol</h2><ul>
<li>不必须实现的函数，应指定为<code>@optional</code>。</li>
</ul>
<h2 id="错误与异常"><a href="#错误与异常" class="headerlink" title="错误与异常"></a>错误与异常</h2><ul>
<li>只针对第三方库做<code>@try</code>、<code>@catch</code>。代码中不要使用<code>@throw</code>，而使用<code>NSError</code>来返回错误。</li>
<li>当引用一个返回错误参数的方法时，应该针对返回值做检查，而非错误变量。</li>
</ul>
<p>应该<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">NSError *error;</div><div class="line">if (![self trySomethingWithError:&amp;error]) &#123;</div><div class="line">    // 处理错误</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>不应该：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">NSError *error;</div><div class="line">[self trySomethingWithError:&amp;error];</div><div class="line">if (error) &#123;</div><div class="line">    // 处理错误</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h2 id="其它-1"><a href="#其它-1" class="headerlink" title="其它"></a>其它</h2><ul>
<li>Xcode提示的各种warning，应该尽量消除。</li>
<li>推荐使用<code>CGGeometry.h</code>的函数，而不推荐直接使用<code>frame.size.width</code>等存取rect。如：</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">CGRectMake()</div><div class="line">CGRectGetMaxX()</div><div class="line">CGRectGetHeight()</div><div class="line">CGSizeEqualToSize()</div><div class="line">CGRectContainsPoint()</div></pre></td></tr></table></figure>
<ul>
<li>偏向使用字面量，如：</li>
</ul>
<p>推荐<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">NSArray *names = @[@&quot;Brian&quot;, @&quot;Matt&quot;, @&quot;Chris&quot;, @&quot;Alex&quot;, @&quot;Steve&quot;, @&quot;Paul&quot;];</div><div class="line">NSDictionary *productManagers = @&#123;@&quot;iPhone&quot; : @&quot;Kate&quot;, @&quot;iPad&quot; : @&quot;Kamal&quot;, @&quot;Mobile Web&quot; : @&quot;Bill&quot;&#125;;</div><div class="line">NSNumber *shouldUseLiterals = @YES;</div><div class="line">NSNumber *buildingZIPCode = @10018;</div></pre></td></tr></table></figure></p>
<p>不推荐<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">NSArray *names = [NSArray arrayWithObjects:@&quot;Brian&quot;, @&quot;Matt&quot;, @&quot;Chris&quot;, @&quot;Alex&quot;, @&quot;Steve&quot;, @&quot;Paul&quot;, nil];</div><div class="line">NSDictionary *productManagers = [NSDictionary dictionaryWithObjectsAndKeys: @&quot;Kate&quot;, @&quot;iPhone&quot;, @&quot;Kamal&quot;, @&quot;iPad&quot;, @&quot;Bill&quot;, @&quot;Mobile Web&quot;, nil];</div><div class="line">NSNumber *shouldUseLiterals = [NSNumber numberWithBool:YES];</div><div class="line">NSNumber *buildingZIPCode = [NSNumber numberWithInteger:10018];</div></pre></td></tr></table></figure></p>

      
    </div>
    <footer class="article-footer">
      <ul class="article-meta">
        <li>
          <span class="label">Published Date:</span>
          <a href="/2017/07/14/Objective-C代码规范/" class="article-date">
  <time datetime="2017-07-14T10:16:57.000Z" itemprop="datePublished">2017-07-14</time>
</a>

        </li>
        
        
        <hr/>
      </ul>
    </footer>
  </div>
  
    
<nav id="article-nav" class="article-nav">
  
    <span id="article-nav-newer" class="article-nav-link-wrap newer"></span>
  
  
    <a href="/2017/07/03/SDWebImage源码解析（一）/" id="article-nav-older" class="article-nav-link-wrap older">
      <strong class="article-nav-caption">Viejo</strong>
      <div class="article-nav-title">SDWebImage源码解析（一）</div>
    </a>
  
</nav>


  
</article>




      </div>
      
    <footer id="footer" class="post-footer footer">
      <hr/>
      <div id="footerContent" class="footer-content">
        <p>ipsum dolor sit amet, <strong>consectetur adipiscing elit.</strong> Fusce eget urna vitae velit <em>eleifend interdum at ac nisi. In nec ligula lacus. Cum sociis natoque</em> penatibus et magnis dis parturient montes, nascetur ridiculus mus. Sed eu cursus erat, ut dapibus quam. Post</p>


      </div>
    </footer>

      

<script src="//cdn.bootcss.com/jquery/2.2.4/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/typing.js"></script>
<!--[if lt IE 9]><script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7/html5shiv.min.js"></script><![endif]-->







    </div>
  </body>
</html>
